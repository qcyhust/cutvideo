{"version":3,"sources":["utils/buffer.js","../node_modules/global/window.js","../node_modules/m3u8-parser/dist/m3u8-parser.es.js","utils/fetch.js","utils/convert.js","utils/index.js","index.js","../../emsdk/node/8.9.1_64bit/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["str2buffer","str","buf","ArrayBuffer","length","bufView","Uint8Array","i","strLen","charCodeAt","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_assertThisInitialized","self","ReferenceError","Stream","listeners","_proto","on","type","listener","push","off","index","indexOf","splice","trigger","callbacks","args","Array","slice","dispose","pipe","destination","data","LineStream","_Stream","_this","buffer","nextNewline","substring","attributeSeparator","value","keyvalue","RegExp","parseAttributes","attributes","attrs","split","result","attr","exec","replace","ParseStream","customParsers","tagMappers","line","_this2","match","event","trim","uri","newLines","reduce","acc","mapper","mappedLine","concat","forEach","newLine","text","tagType","duration","parseFloat","title","parseInt","version","number","playlistType","offset","allowed","test","URI","BYTERANGE","_attributes$BYTERANGE","byterange","RESOLUTION","resolution","width","height","BANDWIDTH","dateTimeString","dateTimeObject","Date","IV","toLowerCase","Uint32Array","PRECISE","addParser","_ref","_this3","expression","customType","dataParser","segment","addTagMapper","_ref2","map","mapFn","decodeB64ToUint8Array","b64Text","decodedString","window","atob","array","Parser","lineStream","parseStream","uris","currentUri","currentMap","_key","noop","defaultMediaGroups","widevineUuid","currentTimeline","manifest","allowCache","discontinuityStarts","segments","entry","mediaGroup","rendition","tag","message","endlist","endList","inf","mediaSequence","discontinuitySequence","METHOD","KEYFORMAT","VALID_METHODS","KEYID","contentProtection","schemeIdUri","keyId","pssh","method","iv","isFinite","playlist","streamInf","playlists","mediaGroups","media","TYPE","NAME","mediaGroupType","default","DEFAULT","autoselect","AUTOSELECT","LANGUAGE","language","instreamId","CHARACTERISTICS","characteristics","FORCED","forced","discontinuity","programDateTime","targetduration","targetDuration","totalduration","totalDuration","start","isNaN","timeOffset","precise","cueOut","cueOutCont","cueIn","timeline","comment","custom","chunk","end","options","fetchData","url","fetch","then","response","Error","fetchText","fetchBuffer","m3u8Parser","parseArguments","t","convertSegs","opts","path","total","diff","res","item","prev","name","segs","generateM3u8","m3u8","getRoot","join","converHLS","m3u8Text","fetches","Promise","all","buffers","m3u8Buffer","tsFiles","files","worker","Worker","filesElement","document","getElementById","formElement","submitBtn","loadingBtn","addEventListener","e","preventDefault","alert","style","display","console","log","postMessage","catch","err","onmessage","file","appendChild","getDownloadLink","time","fileData","fileName","blob","Blob","src","URL","createObjectURL","img","createElement","a","download","href","textContent","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","stack","overlay","createErrorOverlay","body","remove","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","isArray","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["/**\n * 字符串转arrayBuffer\n * @param  {String} str 输入字符串\n * @return {ArrayBuffer}\n */\nexport function str2buffer(str) {\n    const buf = new ArrayBuffer(str.length * 2);\n    const bufView = new Uint8Array(buf);\n\n    for (let i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n    }\n\n    return buf;\n}","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */\nimport window from 'global/window';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\n/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implementation that handles event dispatching.\n *\n * @class Stream\n */\nvar Stream =\n/*#__PURE__*/\nfunction () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n    var i;\n    var length;\n    var args;\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      length = callbacks.length;\n\n      for (i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      args = Array.prototype.slice.call(arguments, 1);\n      length = callbacks.length;\n\n      for (i = 0; i < length; ++i) {\n        callbacks[i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nvar LineStream =\n/*#__PURE__*/\nfunction (_Stream) {\n  _inheritsLoose(LineStream, _Stream);\n\n  function LineStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.buffer = '';\n    return _this;\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  var _proto = LineStream.prototype;\n\n  _proto.push = function push(data) {\n    var nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  };\n\n  return LineStream;\n}(Stream);\n\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var result = {};\n  var i = attrs.length;\n  var attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nvar ParseStream =\n/*#__PURE__*/\nfunction (_Stream) {\n  _inheritsLoose(ParseStream, _Stream);\n\n  function ParseStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.customParsers = [];\n    _this.tagMappers = [];\n    return _this;\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  var _proto = ParseStream.prototype;\n\n  _proto.push = function push(line) {\n    var _this2 = this;\n\n    var match;\n    var event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    var newLines = this.tagMappers.reduce(function (acc, mapper) {\n      var mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(function (newLine) {\n      for (var i = 0; i < _this2.customParsers.length; i++) {\n        if (_this2.customParsers[i].call(_this2, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        _this2.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n\n        return;\n      }\n\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'totalduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'byterange'\n        };\n\n        if (match[1]) {\n          event.length = parseInt(match[1], 10);\n        }\n\n        if (match[2]) {\n          event.offset = parseInt(match[2], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MAP:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          var attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            var _attributes$BYTERANGE = attributes.BYTERANGE.split('@'),\n                length = _attributes$BYTERANGE[0],\n                offset = _attributes$BYTERANGE[1];\n\n            event.byterange = {};\n\n            if (length) {\n              event.byterange.length = parseInt(length, 10);\n            }\n\n            if (offset) {\n              event.byterange.offset = parseInt(offset, 10);\n            }\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-KEY:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-START:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      } // unknown tag type\n\n\n      _this2.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(_ref) {\n    var _this3 = this;\n\n    var expression = _ref.expression,\n        customType = _ref.customType,\n        dataParser = _ref.dataParser,\n        segment = _ref.segment;\n\n    if (typeof dataParser !== 'function') {\n      dataParser = function dataParser(line) {\n        return line;\n      };\n    }\n\n    this.customParsers.push(function (line) {\n      var match = expression.exec(line);\n\n      if (match) {\n        _this3.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType: customType,\n          segment: segment\n        });\n\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(_ref2) {\n    var expression = _ref2.expression,\n        map = _ref2.map;\n\n    var mapFn = function mapFn(line) {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  };\n\n  return ParseStream;\n}(Stream);\n\nfunction decodeB64ToUint8Array(b64Text) {\n  var decodedString = window.atob(b64Text || '');\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}\n\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\nvar Parser =\n/*#__PURE__*/\nfunction (_Stream) {\n  _inheritsLoose(Parser, _Stream);\n\n  function Parser() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.lineStream = new LineStream();\n    _this.parseStream = new ParseStream();\n\n    _this.lineStream.pipe(_this.parseStream);\n    /* eslint-disable consistent-this */\n\n\n    var self = _assertThisInitialized(_this);\n    /* eslint-enable consistent-this */\n\n\n    var uris = [];\n    var currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    var currentMap; // if specified, the active decryption key\n\n    var _key;\n\n    var noop = function noop() {};\n\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    var widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    var currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    _this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // update the manifest with the m3u8 entry from the parse stream\n\n    _this.parseStream.on('data', function (entry) {\n      var mediaGroup;\n      var rendition;\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  this.trigger('info', {\n                    message: 'defaulting offset to zero'\n                  });\n                  entry.offset = 0;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                var VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = {\n                  'com.widevine.alpha': {\n                    attributes: {\n                      schemeIdUri: entry.attributes.KEYFORMAT,\n                      // remove '0x' from the key id string\n                      keyId: entry.attributes.KEYID.substring(2)\n                    },\n                    // decode the base64-encoded PSSH box\n                    pssh: decodeB64ToUint8Array(entry.attributes.URI.split(',')[1])\n                  }\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n            map: function map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              _extends(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            'program-date-time': function programDateTime() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n            },\n            totalduration: function totalduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid total duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.totalDuration = entry.duration;\n            },\n            start: function start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n            'cue-out': function cueOut() {\n              currentUri.cueOut = entry.data;\n            },\n            'cue-out-cont': function cueOutCont() {\n              currentUri.cueOutCont = entry.data;\n            },\n            'cue-in': function cueIn() {\n              currentUri.cueIn = entry.data;\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (_key) {\n            currentUri.key = _key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // prepare for the next URI\n\n\n          currentUri = {};\n        },\n        comment: function comment() {// comments are not important for playback\n        },\n        custom: function custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n      })[entry.type].call(self);\n    });\n\n    return _this;\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n\n\n  var _proto = Parser.prototype;\n\n  _proto.push = function push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n  ;\n\n  _proto.end = function end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  };\n\n  return Parser;\n}(Stream);\n\nexport { LineStream, ParseStream, Parser };\n","/**\n * 请求数据\n * @param  {String} type 数据类型\n * @return {Function}\n */\nexport function fetchData(type) {\n    return (url) => fetch(url)\n        .then((response) => {\n            if (response[type]) {\n                return response[type]();\n            }\n\n            throw Error('fetch type is invalid');\n        });\n}\n\nexport const fetchText = fetchData('text');\nexport const fetchBuffer = fetchData('arrayBuffer');","import { Parser } from 'm3u8-parser';\nimport { fetchText, fetchBuffer } from './fetch';\nimport { str2buffer } from './buffer';\nconst m3u8Parser = new Parser();\n\n/**\n * 解析ffmpeg参数\n * @param  {String} text 参数\n * @return {Array}\n */\nexport function parseArguments(text) {\n    text = text.replace(/\\s+/g, ' ');\n    let args = [];\n\n    text.split(' ').forEach(function (t, i) {\n        t = t.trim();\n        if ((i % 2) === 1) {\n            args.push(t);\n        } else {\n            args = args.concat(t.split(' '));\n        }\n    });\n\n    return args;\n}\n\n/**\n * 转换ts文件\n * @param  {String} text 参数\n * @param {Object} objs\n * @return {Object}\n */\nexport function convertSegs(opts) {\n    const {\n        segments, start, end, path\n    } = opts;\n\n    let total = 0;\n    let diff = 0;\n    const res = [];\n\n    segments.forEach((item, index) => {\n        const prev = total;\n        total += item.duration;\n\n        if (prev <= end && total >= start) {\n            res.push({\n                duration: item.duration,\n                name: `play${index}.ts`,\n                uri: item.uri,\n                url: `${path}/${item.uri}`\n            });\n            \n            if (res.length === 1) {\n                diff = start - prev;\n            }\n        }\n\n    });\n\n    return {\n        segs: res,\n        diff\n    };\n}\n\n/**\n * 构建m3u8文件\n * @param {Object} m3u8 m3u8解析对象\n * @return {String} m3u8字符串\n */\nfunction generateM3u8(m3u8) {\n    let res = `#EXTM3U\\n#EXT-X-VERSION:3\\n#EXT-X-MEDIA-SEQUENCE:0\\n#EXT-X-PLAYLIST-TYPE:${m3u8.playlistType}\\n#EXT-X-TARGETDURATION:${m3u8.targetDuration}\\n#EXT-X-PROGRAM-DATE-TIME:${m3u8.dateTimeString} \\n`;\n\n    m3u8.segments.forEach((segment, index) => {\n        res += `#EXTINF:${segment.duration}\\n${segment.name}\\n`;\n    });\n\n    return res += '#EXT-X-ENDLIST';\n}\n\nfunction getRoot(url) {\n    return url.split('/').slice(0, -1).join('/');\n}\n\n/**\n * 转换m3u8文件\n * @param  {String} url m3u8地址\n * @param {Number} start 起始时间\n * @param {Number} end 终止时间\n * @return {Promise} 解析文件\n */\nexport function converHLS(url, start, end) {\n    const path = getRoot(url);\n\n    return fetchText(url)\n            .then((m3u8) => {\n                m3u8Parser.push(m3u8);\n                m3u8Parser.end();\n\n                const { segments } = m3u8Parser.manifest;\n                // 获取时间段内的ts文件\n                const { segs, diff } = convertSegs({\n                    segments, \n                    path, \n                    start, \n                    end\n                });\n\n                m3u8Parser.manifest.segments = segs;\n                // 获取m3u8文件\n                const m3u8Text = generateM3u8(m3u8Parser.manifest);\n\n                return {\n                    m3u8: m3u8Text,\n                    segments: segs,\n                    diff\n                };\n            })\n            .then(({m3u8, segments, diff}) => {\n                const fetches = segments.map((segment) => fetchBuffer(segment.url));\n\n                return Promise.all(fetches)\n                        .then((buffers) => {\n                            const m3u8Buffer = str2buffer(m3u8);\n                            const tsFiles = buffers.map((buffer, index) => ({\n                                    name: segments[index].name,\n                                    data: new Uint8Array(buffer)\n                                }));\n\n                            return {\n                                files: [\n                                    {\n                                        name: 'playlist.m3u8',\n                                        data: new Uint8Array(m3u8Buffer)\n                                    }, \n                                    ...tsFiles\n                                ],\n                                diff\n                            }\n                        });\n            });\n}","import { str2buffer } from './buffer';\nimport { parseArguments, converHLS } from './convert';\nimport { fetchData, fetchText, fetchBuffer } from './fetch';\n\nexport {\n    str2buffer,\n    parseArguments,\n    converHLS,\n    fetchData, \n    fetchText, \n    fetchBuffer\n};\n\n\n","\nconst worker = new Worker('./worker/index.js');\nimport {\n    parseArguments,\n    converHLS\n} from './utils';\n\nconst filesElement = document.getElementById('file');\nconst formElement = document.getElementById('form');\nconst submitBtn = document.getElementById('submit');\nconst loadingBtn = document.getElementById('loading');\n\nformElement.addEventListener('submit', (e) =>{\n    e.preventDefault();\n\n    const url = formElement[0].value.trim();\n    const start = formElement[1].value.trim();\n    const end = formElement[2].value.trim();\n\n    if (end <= start) {\n        alert('请检查输入时间');\n        return;\n    }\n\n    if (end - start > 300) {\n        alert('间隔太长，最大支持5分钟');\n        return;\n    }\n\n    if (!url) {\n        alert('请检查输入地址');\n        return;\n    }\n\n    submitBtn.style.display = 'none';\n    loadingBtn.style.display = 'block';\n\n    converHLS(url, start, end)\n        .then(({ files, diff }) => {\n            const args = parseArguments(`-i playlist.m3u8 -ss ${diff} -t ${end - start} -c copy -bsf:a aac_adtstoasc output.mp4`);\n            \n            console.log(args);\n\n            worker.postMessage({\n                type: 'command',\n                arguments: args,\n                files\n            });\n        })\n        .catch((err) => {\n            console.log('error: ', err);\n        });\n});\n\nworker.onmessage = function (event) {\n    const message = event.data;\n\n    if (message.type == 'done') {\n        var buffers = message.data;\n\n        buffers.forEach(function (file) {\n            filesElement.appendChild(getDownloadLink(file.data, file.name, message.time));\n        });\n\n        submitBtn.style.display = 'block';\n        loadingBtn.style.display = 'none';\n    }\n}\n\nfunction getDownloadLink(fileData, fileName, duration) {\n    if (fileName.match(/\\.jpeg|\\.gif|\\.jpg|\\.png/)) {\n        const blob = new Blob([fileData]);\n        const src = window.URL.createObjectURL(blob);\n        const img = document.createElement('img');\n\n        img.src = src;\n        return img;\n    }\n    else {\n        const a = document.createElement('a');\n        a.download = fileName;\n        const blob = new Blob([fileData]);\n        const src = window.URL.createObjectURL(blob);\n        a.href = src;\n        a.textContent = `下载文件 ${fileName} ,  裁剪用时: ${duration}ms`;\n\n        return a;\n    }\n}\n\n\n\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}